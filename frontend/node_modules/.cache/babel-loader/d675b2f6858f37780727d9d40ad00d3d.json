{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport { UseProductContext } from './UseProductContext';\nimport { UseAuthContext } from './UseAuthContext';\nexport const useLike = () => {\n  _s();\n\n  const [error, setError] = useState(null);\n  const [addintresting, setAddintresting] = useState(false);\n  const [isloading, setIsloadig] = useState(true);\n  const {\n    likes,\n    dispatch\n  } = UseProductContext();\n  const {\n    user\n  } = UseAuthContext();\n\n  const AddIntresting = async id => {\n    setAddintresting(true);\n    const response = await fetch(`/api/products/interests/${id}`, {\n      method: 'PATCH',\n      headers: {\n        'Authorization': `Bearer ${user.token}`\n      }\n    });\n\n    if (!response.ok) {\n      setError(\"شما این محصول را لایک کرده اید\");\n      setTimeout(() => {\n        setError(null);\n      }, 3000);\n      setAddintresting(false);\n    }\n\n    if (response.ok) {\n      setAddintresting(false);\n    }\n  };\n\n  const RemoveIntresting = async id => {\n    setAddintresting(true);\n    const response = await fetch(`/api/products/interests/${id}`, {\n      method: 'DELETE',\n      headers: {\n        'Authorization': `Bearer ${user.token}`\n      }\n    });\n    const json = await response.json();\n\n    if (!response.ok) {\n      setError('شما این محصول را لایک نکرده اید ');\n    }\n\n    if (response.ok) {\n      setAddintresting(false);\n      dispatch({\n        type: 'REMOVE_LIKE',\n        payload: json\n      });\n    }\n\n    const getUserLikes = async () => {\n      const response = await fetch('/api/products/interests', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${user.token}`\n        }\n      });\n      const json = await response.json();\n\n      if (!response.ok) {\n        setError(json.error);\n      }\n\n      if (response.ok) {\n        setIsloadig(false);\n        dispatch({\n          type: 'SET_LIKES',\n          payload: json\n        });\n      }\n    };\n\n    return {\n      error,\n      isloading,\n      likes,\n      addintresting,\n      AddIntresting,\n      RemoveIntresting,\n      getUserLikes\n    };\n  };\n};\n\n_s(useLike, \"U1ESiA4rgnKM0TTJF4NEtfWFN/4=\");","map":{"version":3,"names":["useState","UseProductContext","UseAuthContext","useLike","error","setError","addintresting","setAddintresting","isloading","setIsloadig","likes","dispatch","user","AddIntresting","id","response","fetch","method","headers","token","ok","setTimeout","RemoveIntresting","json","type","payload","getUserLikes"],"sources":["C:/Users/moham/Documents/customersell/frontend/src/hooks/useLike.js"],"sourcesContent":["import { useState } from 'react'\r\nimport {UseProductContext} from './UseProductContext'\r\nimport { UseAuthContext } from './UseAuthContext'\r\n\r\nexport const useLike = () => {\r\n\r\n    const [error,setError] = useState(null)\r\n    const [addintresting,setAddintresting] = useState(false)\r\n    const [isloading,setIsloadig] = useState(true)\r\n    const {likes,dispatch} = UseProductContext()\r\n    const {user} = UseAuthContext()\r\n\r\n    const AddIntresting = async(id) => {\r\n        setAddintresting(true)\r\n        const response = await fetch(`/api/products/interests/${id}`,{\r\n            method : 'PATCH',\r\n            headers : {\r\n                'Authorization' : `Bearer ${user.token}`\r\n            }\r\n        })\r\n        if(!response.ok){\r\n            setError(\"شما این محصول را لایک کرده اید\")\r\n            setTimeout(()=>{\r\n                setError(null)\r\n            },3000)\r\n            setAddintresting(false)\r\n        }\r\n        if(response.ok){\r\n            setAddintresting(false)\r\n        }   \r\n    }\r\n\r\n    const RemoveIntresting = async(id) => {\r\n        setAddintresting(true)\r\n        const response = await fetch(`/api/products/interests/${id}`,{\r\n            method : 'DELETE',\r\n            headers : {\r\n                'Authorization' : `Bearer ${user.token}`\r\n            }\r\n        })\r\n        const json = await response.json()\r\n        \r\n        if (!response.ok){\r\n            setError('شما این محصول را لایک نکرده اید ')\r\n        }\r\n        if (response.ok){\r\n            setAddintresting(false)\r\n            dispatch({type:'REMOVE_LIKE',payload:json})\r\n        }\r\n\r\n    const getUserLikes = async () => {\r\n        const response = await fetch('/api/products/interests',{\r\n            method : 'POST',\r\n            headers : {\r\n                'Authorization' : `Bearer ${user.token}`\r\n            }\r\n            })\r\n            const json = await response.json()\r\n            if (!response.ok){\r\n                setError(json.error)\r\n            }\r\n            if(response.ok){\r\n                setIsloadig(false)\r\n                dispatch({type:'SET_LIKES',payload:json})\r\n\r\n            }\r\n\r\n        \r\n    }\r\n\r\n    return {error,isloading,likes,addintresting,AddIntresting,RemoveIntresting,getUserLikes}\r\n}}\r\n "],"mappings":";;AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,SAAQC,iBAAR,QAAgC,qBAAhC;AACA,SAASC,cAAT,QAA+B,kBAA/B;AAEA,OAAO,MAAMC,OAAO,GAAG,MAAM;EAAA;;EAEzB,MAAM,CAACC,KAAD,EAAOC,QAAP,IAAmBL,QAAQ,CAAC,IAAD,CAAjC;EACA,MAAM,CAACM,aAAD,EAAeC,gBAAf,IAAmCP,QAAQ,CAAC,KAAD,CAAjD;EACA,MAAM,CAACQ,SAAD,EAAWC,WAAX,IAA0BT,QAAQ,CAAC,IAAD,CAAxC;EACA,MAAM;IAACU,KAAD;IAAOC;EAAP,IAAmBV,iBAAiB,EAA1C;EACA,MAAM;IAACW;EAAD,IAASV,cAAc,EAA7B;;EAEA,MAAMW,aAAa,GAAG,MAAMC,EAAN,IAAa;IAC/BP,gBAAgB,CAAC,IAAD,CAAhB;IACA,MAAMQ,QAAQ,GAAG,MAAMC,KAAK,CAAE,2BAA0BF,EAAG,EAA/B,EAAiC;MACzDG,MAAM,EAAG,OADgD;MAEzDC,OAAO,EAAG;QACN,iBAAmB,UAASN,IAAI,CAACO,KAAM;MADjC;IAF+C,CAAjC,CAA5B;;IAMA,IAAG,CAACJ,QAAQ,CAACK,EAAb,EAAgB;MACZf,QAAQ,CAAC,gCAAD,CAAR;MACAgB,UAAU,CAAC,MAAI;QACXhB,QAAQ,CAAC,IAAD,CAAR;MACH,CAFS,EAER,IAFQ,CAAV;MAGAE,gBAAgB,CAAC,KAAD,CAAhB;IACH;;IACD,IAAGQ,QAAQ,CAACK,EAAZ,EAAe;MACXb,gBAAgB,CAAC,KAAD,CAAhB;IACH;EACJ,CAlBD;;EAoBA,MAAMe,gBAAgB,GAAG,MAAMR,EAAN,IAAa;IAClCP,gBAAgB,CAAC,IAAD,CAAhB;IACA,MAAMQ,QAAQ,GAAG,MAAMC,KAAK,CAAE,2BAA0BF,EAAG,EAA/B,EAAiC;MACzDG,MAAM,EAAG,QADgD;MAEzDC,OAAO,EAAG;QACN,iBAAmB,UAASN,IAAI,CAACO,KAAM;MADjC;IAF+C,CAAjC,CAA5B;IAMA,MAAMI,IAAI,GAAG,MAAMR,QAAQ,CAACQ,IAAT,EAAnB;;IAEA,IAAI,CAACR,QAAQ,CAACK,EAAd,EAAiB;MACbf,QAAQ,CAAC,kCAAD,CAAR;IACH;;IACD,IAAIU,QAAQ,CAACK,EAAb,EAAgB;MACZb,gBAAgB,CAAC,KAAD,CAAhB;MACAI,QAAQ,CAAC;QAACa,IAAI,EAAC,aAAN;QAAoBC,OAAO,EAACF;MAA5B,CAAD,CAAR;IACH;;IAEL,MAAMG,YAAY,GAAG,YAAY;MAC7B,MAAMX,QAAQ,GAAG,MAAMC,KAAK,CAAC,yBAAD,EAA2B;QACnDC,MAAM,EAAG,MAD0C;QAEnDC,OAAO,EAAG;UACN,iBAAmB,UAASN,IAAI,CAACO,KAAM;QADjC;MAFyC,CAA3B,CAA5B;MAMI,MAAMI,IAAI,GAAG,MAAMR,QAAQ,CAACQ,IAAT,EAAnB;;MACA,IAAI,CAACR,QAAQ,CAACK,EAAd,EAAiB;QACbf,QAAQ,CAACkB,IAAI,CAACnB,KAAN,CAAR;MACH;;MACD,IAAGW,QAAQ,CAACK,EAAZ,EAAe;QACXX,WAAW,CAAC,KAAD,CAAX;QACAE,QAAQ,CAAC;UAACa,IAAI,EAAC,WAAN;UAAkBC,OAAO,EAACF;QAA1B,CAAD,CAAR;MAEH;IAGR,CAlBD;;IAoBA,OAAO;MAACnB,KAAD;MAAOI,SAAP;MAAiBE,KAAjB;MAAuBJ,aAAvB;MAAqCO,aAArC;MAAmDS,gBAAnD;MAAoEI;IAApE,CAAP;EACH,CAvCG;AAuCF,CAnEK;;GAAMvB,O"},"metadata":{},"sourceType":"module"}