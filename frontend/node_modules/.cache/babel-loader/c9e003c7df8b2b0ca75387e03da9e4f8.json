{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport { UseProductContext } from './UseProductContext';\nimport { UseAuthContext } from './UseAuthContext';\nexport const useLike = () => {\n  _s();\n\n  const [error, setError] = useState(null);\n  const [addintresting, setAddintresting] = useState(false);\n  const {\n    likes,\n    dispatch\n  } = UseProductContext();\n  const {\n    user\n  } = UseAuthContext();\n\n  const AddIntresting = async id => {\n    setAddintresting(true);\n    const response = await fetch(`/api/products/interests/${id}`, {\n      method: 'PATCH',\n      headers: {\n        'Authorization': `Bearer ${user.token}`\n      }\n    });\n\n    if (!response.ok) {\n      setError(\"شما این محصول را لایک کرده اید\");\n      setTimeout(() => {\n        setError(null);\n      }, 3000);\n      setAddintresting(false);\n    }\n\n    if (response.ok) {\n      setAddintresting(false);\n    }\n  };\n\n  const RemoveIntresting = async id => {\n    setAddintresting(true);\n    const response = await fetch(`/api/products/interests/${id}`, {\n      method: 'DELETE',\n      headers: {\n        'Authorization': `Bearer ${user.token}`\n      }\n    });\n    const json = await response.json();\n\n    if (!response.ok) {\n      setError('شما این محصول را لایک نکرده اید ');\n    }\n\n    if (response.ok) {\n      setAddintresting(false);\n      dispatch({\n        type: 'REMOVE_LIKE',\n        payload: json\n      });\n    }\n  };\n\n  return {\n    error,\n    likes,\n    addintresting,\n    AddIntresting,\n    RemoveIntresting\n  };\n};\n\n_s(useLike, \"3NhIkcQAxvA8mfbLJYg/AxKSNtA=\");","map":{"version":3,"names":["useState","UseProductContext","UseAuthContext","useLike","error","setError","addintresting","setAddintresting","likes","dispatch","user","AddIntresting","id","response","fetch","method","headers","token","ok","setTimeout","RemoveIntresting","json","type","payload"],"sources":["C:/Users/moham/Documents/customersell/frontend/src/hooks/useLike.js"],"sourcesContent":["import { useState } from 'react'\r\nimport {UseProductContext} from './UseProductContext'\r\nimport { UseAuthContext } from './UseAuthContext'\r\nexport const useLike = () => {\r\n\r\n    const [error,setError] = useState(null)\r\n    const [addintresting,setAddintresting] = useState(false)\r\n    const {likes,dispatch} = UseProductContext()\r\n    const {user} = UseAuthContext()\r\n    \r\n    const AddIntresting = async(id) => {\r\n        setAddintresting(true)\r\n        const response = await fetch(`/api/products/interests/${id}`,{\r\n            method : 'PATCH',\r\n            headers : {\r\n                'Authorization' : `Bearer ${user.token}`\r\n            }\r\n        })\r\n        if(!response.ok){\r\n            setError(\"شما این محصول را لایک کرده اید\")\r\n            setTimeout(()=>{\r\n                setError(null)\r\n            },3000)\r\n            setAddintresting(false)\r\n        }\r\n        if(response.ok){\r\n            setAddintresting(false)\r\n        }   \r\n    }\r\n\r\n    const RemoveIntresting = async(id) => {\r\n        setAddintresting(true)\r\n        const response = await fetch(`/api/products/interests/${id}`,{\r\n            method : 'DELETE',\r\n            headers : {\r\n                'Authorization' : `Bearer ${user.token}`\r\n            }\r\n        })\r\n        const json = await response.json()\r\n        \r\n        if (!response.ok){\r\n            setError('شما این محصول را لایک نکرده اید ')\r\n        }\r\n        if (response.ok){\r\n            setAddintresting(false)\r\n            dispatch({type:'REMOVE_LIKE',payload:json})\r\n        }\r\n\r\n\r\n\r\n        \r\n    }\r\n\r\n    return {error,likes,addintresting,AddIntresting,RemoveIntresting}\r\n}\r\n "],"mappings":";;AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,SAAQC,iBAAR,QAAgC,qBAAhC;AACA,SAASC,cAAT,QAA+B,kBAA/B;AACA,OAAO,MAAMC,OAAO,GAAG,MAAM;EAAA;;EAEzB,MAAM,CAACC,KAAD,EAAOC,QAAP,IAAmBL,QAAQ,CAAC,IAAD,CAAjC;EACA,MAAM,CAACM,aAAD,EAAeC,gBAAf,IAAmCP,QAAQ,CAAC,KAAD,CAAjD;EACA,MAAM;IAACQ,KAAD;IAAOC;EAAP,IAAmBR,iBAAiB,EAA1C;EACA,MAAM;IAACS;EAAD,IAASR,cAAc,EAA7B;;EAEA,MAAMS,aAAa,GAAG,MAAMC,EAAN,IAAa;IAC/BL,gBAAgB,CAAC,IAAD,CAAhB;IACA,MAAMM,QAAQ,GAAG,MAAMC,KAAK,CAAE,2BAA0BF,EAAG,EAA/B,EAAiC;MACzDG,MAAM,EAAG,OADgD;MAEzDC,OAAO,EAAG;QACN,iBAAmB,UAASN,IAAI,CAACO,KAAM;MADjC;IAF+C,CAAjC,CAA5B;;IAMA,IAAG,CAACJ,QAAQ,CAACK,EAAb,EAAgB;MACZb,QAAQ,CAAC,gCAAD,CAAR;MACAc,UAAU,CAAC,MAAI;QACXd,QAAQ,CAAC,IAAD,CAAR;MACH,CAFS,EAER,IAFQ,CAAV;MAGAE,gBAAgB,CAAC,KAAD,CAAhB;IACH;;IACD,IAAGM,QAAQ,CAACK,EAAZ,EAAe;MACXX,gBAAgB,CAAC,KAAD,CAAhB;IACH;EACJ,CAlBD;;EAoBA,MAAMa,gBAAgB,GAAG,MAAMR,EAAN,IAAa;IAClCL,gBAAgB,CAAC,IAAD,CAAhB;IACA,MAAMM,QAAQ,GAAG,MAAMC,KAAK,CAAE,2BAA0BF,EAAG,EAA/B,EAAiC;MACzDG,MAAM,EAAG,QADgD;MAEzDC,OAAO,EAAG;QACN,iBAAmB,UAASN,IAAI,CAACO,KAAM;MADjC;IAF+C,CAAjC,CAA5B;IAMA,MAAMI,IAAI,GAAG,MAAMR,QAAQ,CAACQ,IAAT,EAAnB;;IAEA,IAAI,CAACR,QAAQ,CAACK,EAAd,EAAiB;MACbb,QAAQ,CAAC,kCAAD,CAAR;IACH;;IACD,IAAIQ,QAAQ,CAACK,EAAb,EAAgB;MACZX,gBAAgB,CAAC,KAAD,CAAhB;MACAE,QAAQ,CAAC;QAACa,IAAI,EAAC,aAAN;QAAoBC,OAAO,EAACF;MAA5B,CAAD,CAAR;IACH;EAKJ,CArBD;;EAuBA,OAAO;IAACjB,KAAD;IAAOI,KAAP;IAAaF,aAAb;IAA2BK,aAA3B;IAAyCS;EAAzC,CAAP;AACH,CAnDM;;GAAMjB,O"},"metadata":{},"sourceType":"module"}