{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\moham\\\\Documents\\\\customersell\\\\frontend\\\\src\\\\components\\\\AddComment.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { UseAuthContext } from '../hooks/UseAuthContext';\nimport { UseProductContext } from '../hooks/UseProductContext';\nimport Loading from './Loading';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AddComment = _ref => {\n  _s();\n\n  let {\n    id\n  } = _ref;\n  const [comment, setComment] = useState(null);\n  const [comerror, setComerror] = useState(null);\n  const [comloading, setComloading] = useState(false);\n  const {\n    user\n  } = UseAuthContext();\n  const {\n    comments,\n    dispatch\n  } = UseProductContext();\n  const [isloading, setIsloading] = useState(true);\n\n  const PostComment = async () => {\n    setComloading(true);\n    const response = await fetch(`/api/products/comment/${id}`, {\n      method: 'POST',\n      headers: {\n        \"Content-Type\": \"application/json\",\n        'Authorization': `Bearer ${user.token}`\n      },\n      body: JSON.stringify({\n        comment\n      })\n    });\n    const json = await response.json();\n\n    if (!response.ok) {\n      setComloading(false);\n      setComerror(json.error);\n      setTimeout(() => {\n        setComerror(null);\n      }, 2000);\n    }\n\n    if (response.ok) {\n      setComloading(false);\n    }\n  };\n\n  useEffect(() => {\n    const getAllComments = async () => {\n      const response = await fetch(`/api/products/${id}`, {\n        headers: {\n          'Authorization': `Bearer ${user.token}`\n        }\n      });\n      const json = await response.json();\n\n      if (response.ok) {\n        dispatch({\n          type: \"SET_COMMENTS\",\n          payload: json\n        });\n        setIsloading(false);\n      }\n    };\n\n    getAllComments();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container border border-primary\",\n    children: isloading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-end\",\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label lead mt-3\",\n          children: \" \\u0627\\u0641\\u0632\\u0648\\u062F\\u0646 \\u0646\\u0638\\u0631\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group  mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"input-group-text\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"bi bi-pencil-square\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: comment,\n          maxLength: 50,\n          onChange: e => setComment(e.target.value),\n          className: \"form-control text-end\",\n          placeholder: \"\\u0646\\u0637\\u0631 \\u062E\\u0648\\u062F \\u0631\\u0627 \\u0628\\u0647 \\u0627\\u0634\\u062A\\u0631\\u0627\\u06A9 \\u0628\\u06AF\\u0630\\u0627\\u0631\\u06CC\\u062F \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 21\n      }, this), comment && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          disabled: comloading,\n          onClick: PostComment,\n          className: \"btn btn-outline-success mb-3 fw-btn\",\n          children: comloading ? \"در حال انتشار\" : \"انتشار نظر \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 29\n        }, this), comerror && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border border-2 border-danger mt-2 text-center\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"p-1\",\n            children: comerror\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-end\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"lead\",\n          children: \": \\u0646\\u0638\\u0631\\u0627\\u062A \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 9\n  }, this);\n};\n\n_s(AddComment, \"Zq3fP/+cZcU3FKvNlvXg+q8idaE=\");\n\n_c = AddComment;\nexport default AddComment;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddComment\");","map":{"version":3,"names":["useState","useEffect","UseAuthContext","UseProductContext","Loading","AddComment","id","comment","setComment","comerror","setComerror","comloading","setComloading","user","comments","dispatch","isloading","setIsloading","PostComment","response","fetch","method","headers","token","body","JSON","stringify","json","ok","error","setTimeout","getAllComments","type","payload","e","target","value"],"sources":["C:/Users/moham/Documents/customersell/frontend/src/components/AddComment.js"],"sourcesContent":["import { useState ,useEffect } from \"react\";\r\nimport {UseAuthContext} from '../hooks/UseAuthContext'\r\nimport {UseProductContext} from '../hooks/UseProductContext'\r\nimport Loading from './Loading'\r\n\r\nconst AddComment = ({id}) => {\r\n\r\n    const[comment,setComment] = useState(null)\r\n    const [comerror,setComerror] = useState(null)\r\n    const [comloading,setComloading] = useState(false)\r\n    const {user} = UseAuthContext()\r\n    const {comments,dispatch} = UseProductContext()\r\n    const [isloading,setIsloading] = useState(true)\r\n\r\n    const PostComment = async () => {\r\n        setComloading(true)\r\n        const response = await fetch(`/api/products/comment/${id}`,{\r\n            method : 'POST',\r\n            headers : {\r\n                \"Content-Type\" : \"application/json\",\r\n                'Authorization' : `Bearer ${user.token}`\r\n            },\r\n            body : JSON.stringify({comment})\r\n        })\r\n        const json = await response.json()\r\n\r\n        if (!response.ok){\r\n            setComloading(false)\r\n            setComerror(json.error)\r\n            setTimeout(()=>{\r\n                setComerror(null)\r\n            },2000)\r\n        }\r\n        if (response.ok) {\r\n            setComloading(false)\r\n\r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n        \r\n        const getAllComments = async () => {\r\n            \r\n            const response = await fetch(`/api/products/${id}`,{\r\n                headers : {\r\n                    'Authorization' : `Bearer ${user.token}`\r\n                }\r\n            })\r\n            const json = await response.json()\r\n    \r\n            if (response.ok) {\r\n                dispatch({type : \"SET_COMMENTS\" , payload : json})\r\n                \r\n                setIsloading(false)\r\n            }\r\n\r\n            \r\n        }\r\n        getAllComments()\r\n    },[])\r\n\r\n    return ( \r\n        <div className=\"container border border-primary\">\r\n            { isloading\r\n\r\n                ?\r\n\r\n                <Loading />\r\n\r\n                :\r\n                \r\n                <div>\r\n                    <div className=\"text-end\">\r\n                        <label  className=\"form-label lead mt-3\"> افزودن نظر</label>\r\n                    </div>\r\n                    <div className=\"input-group  mb-3\">\r\n                            <span className=\"input-group-text\">\r\n                                <i className=\"bi bi-pencil-square\"></i>\r\n                            </span>\r\n                            <input \r\n                                type=\"text\" \r\n                                value={comment}\r\n                                maxLength = {50}\r\n                                onChange={(e)=>setComment(e.target.value)}\r\n                                className=\"form-control text-end\" \r\n                                placeholder=\"نطر خود را به اشتراک بگذارید \" />\r\n                    </div>\r\n                    { comment && (\r\n                        <div>\r\n                            <button\r\n                                disabled ={comloading}\r\n                                onClick={PostComment} \r\n                                className=\"btn btn-outline-success mb-3 fw-btn\">\r\n                                    {comloading ? \"در حال انتشار\" : \"انتشار نظر \"} \r\n                            </button>\r\n                            {comerror && (\r\n                                <div className=\"border border-2 border-danger mt-2 text-center\">\r\n                                    <p className=\"p-1\">{comerror}</p>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                    <hr/>\r\n                    <div className=\"text-end\"> \r\n                        <p className=\"lead\">: نظرات </p>\r\n                    </div>\r\n                </div>\r\n            }\r\n        </div>\r\n     );\r\n}\r\n \r\nexport default AddComment;"],"mappings":"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"},"metadata":{},"sourceType":"module"}